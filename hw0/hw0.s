 .file   "hw0.c"
        .intel_syntax noprefix
        .text
        .section        .rodata
.LC0:
        .string "Hello %s\n"
        .text
        .globl  main
        .type   main, @function
main:
        push    rbp                         ; save stack base address of process calling main
        mov     rbp, rsp 		    ; base address of current stack frame
        sub     rsp, 16 		    ; allocate space of local variables (4 byte aligned)
        mov     DWORD PTR [rbp-4], edi	    ; put argc into stack
        mov     QWORD PTR [rbp-16], rsi     ; put argv pointers into stack
        cmp     DWORD PTR [rbp-4], 2        ; check if argc is 2
        jne     .L2                         ; exit if not equal
        mov     rax, QWORD PTR [rbp-16]     ; mov *argv to rax
        add     rax, 8                      ; argv[0] is filename so move on to argv[1]
        mov     rax, QWORD PTR [rax]        ; load value of argv[1]
        mov     rsi, rax                    ; move argv[1] to rsi (start of ABI convention)
        mov     edi, OFFSET FLAT:.LC0       ; format specifier for printf
        mov     eax, 0                      ; vargs indicator
        call    printf                      ; call printf
.L2:
        mov     eax, 0                      ; return value 0
        leave
        ret                                 ; return
        .size   main, .-main
        .ident  "GCC: (GNU) 8.5.0 20210514 (Red Hat 8.5.0-10)"
        .section        .note.GNU-stack,"",@progbits